var PasswordRequirements={config:{debug:!1,containerClassName:"passwordGuidelines",containerSelector:"",passwordRatingQuery:".password-rating",$passwordRating:null,validators:{passLength:{min:8,max:16},similar:{maxSimilarity:4}},strengthMap:{0:"common",1:"uncommon",2:"rare",3:"epic",4:"legendary"}},validators:{passLength:{active:!0,message:"passwordrequirements.length",isValid:function(e,s){return!e||e.length<PasswordRequirements.config.validators.passLength.min&&!s.data("validateLength")?-1:(s.data("validateLength",!0),e.length>=PasswordRequirements.config.validators.passLength.min&&e.length<=PasswordRequirements.config.validators.passLength.max?1:0)}},alphaNum:{active:!0,message:"passwordrequirements.alphanumeric",isValid:function(e,s){return e?e.match(/[0-9]+/)&&e.match(/[a-zA-Z]+/)?(s.data("validateAlphanumeric",!0),1):s.data("validateAlphanumeric")?0:-1:-1}},specialChars:{active:!0,message:"passwordrequirements.specialchars",isValid:function(e,s){return e?e.match(/^[\x20-\x7E]+$/)?1:0:-1}},similar:{active:!0,message:"passwordrequirements.similarname",isValid:function(e,s){var a=PasswordRequirements.config.validators.similar.maxSimilarity,n=$(s.data("email_field")).val();if(PasswordRequirements.config.debug&&console.log("Similarity Compare --- Email: ",n,"Input: ",e),!n)return-1;if(n=n.toLowerCase(),e=e.toLowerCase(),0===n.length||e.length<=a)return-1;for(var i=0;i<=n.length-a;i++)if(e.indexOf(n.substring(i,i+a))>-1)return 0;return 1}},strength:{active:!0,message:"",isValid:function(e,s){var a=$(s.data("email_field")).val(),n=$("#firstName").val(),i=$("#lastName").val(),r="";if(!e||e.length<8)r="poor";else{var t=zxcvbn(e,[a,n,i]).score;r=PasswordRequirements.config.strengthMap[t]}return function(){r?PasswordRequirements.config.$passwordRating.html(messages.ratings[r]).removeClass("poor common uncommon rare epic legendary").addClass(r):PasswordRequirements.config.$passwordRating.html("")}}}},init:function(){PasswordRequirements.config.containerSelector="."+PasswordRequirements.config.containerClassName,PasswordRequirements.config.$passwordRating=$(PasswordRequirements.config.passwordRatingQuery)},initField:function(e){e.on("keyup",function(){PasswordRequirements.keyupHandler($(this))}),e.on("focus",function(){PasswordRequirements.focusHandler($(this))}),e.on("blur",function(){PasswordRequirements.blurHandler($(this))}),e.data("email_field")&&$(e.data("email_field")).on("change keyup",function(){e.val().length&&PasswordRequirements.keyupHandler(e)})},keyupHandler:function(e){PasswordRequirements.config.debug&&console.log("keyup:",this),e.parent().after(this.renderGuidelines(e)),PasswordRequirements.clearIfPassing()},focusHandler:function(e){PasswordRequirements.config.debug&&console.log("focus:",this),PasswordRequirements.keyupHandler(e)},blurHandler:function(){PasswordRequirements.config.debug&&console.log("blur:",this),PasswordRequirements.clearIfPassing()},clearIfPassing:function(){0===$(PasswordRequirements.config.containerSelector).find(".failing, .neutral").length&&$(PasswordRequirements.config.containerSelector).hide()},renderGuidelines:function(e){$(PasswordRequirements.config.containerSelector).remove();var s=$("<div />").addClass(PasswordRequirements.config.containerClassName+" popover bottom"),a=$("<ul />");return s.css({display:"block",position:"relative",width:"auto"}),s.append($("<div />").addClass("arrow").css("left",25),$("<div />").addClass("popover-content").append(a)),$.each(PasswordRequirements.validators,function(s,n){if(n.active){var i=$("<li />"),r=n.isValid(e.val(),e);if("function"==typeof r)return void r();switch(i.text(PasswordRequirements.getPropertyFromString(n.message,messages).message||n.message),i.prepend($("<i />")),a.append(i),PasswordRequirements.config.debug&&console.log(s+" result: "+r),r){case 1:i.addClass("passing muted").find("i").addClass("icon-ok icon-green");break;case 0:i.addClass("failing").find("i").addClass("icon-remove icon-red");break;default:i.addClass("neutral").find("i").addClass("icon-gray icon-info-circle")}}}),s},getPropertyFromString:function(e,s){var a=null;s||(s=window);try{$.each(e.split("."),function(e,n){a=a?a[n]:s[n]})}catch(n){return e}return a||e}};$(function(){PasswordRequirements.init(),$("input[type=password].showGuidelines").each(function(){PasswordRequirements.config.debug&&console.log("Init field",this),PasswordRequirements.initField($(this))})});